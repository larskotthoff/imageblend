<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Double Exposure</title>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"/>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
</head>
<body>
    <div id="blend" style="position: relative; margin-left: auto; margin-right: auto; width: 50%;"></div>
    <div style="position: relative; top: 20px; left: 10%; width: 80%;">
        <div id="slider" style="position: relative; width: 100%;"></div>
        <div id="left" style="position: relative; top: 20px; float: left; text-align: left;"></div>
        <div id="right" style="position: relative; top: 20px; float: right; text-align: right;"></div>
    </div>

    <script type="text/javascript">
        function update(v) {
            $("#top").attr("style", "position: absolute; left: 0px; top: 0px; opacity:" + v / 100 + ";filter:alpha(opacity=" + v + ");");
        }

        $(document).ready(function() {
            $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?", { format: "json" }, function(data) {
                    var litem = data.items[Math.floor(Math.random()*data.items.length)-1],
                        ritem = data.items[Math.floor(Math.random()*data.items.length)-1];
                    $("<img/>").attr("src", litem.media.m).appendTo("#left");
                    $("<br/>").appendTo("#left");
                    $("<a/>").attr("href", litem.link).html(litem.author + ": " + litem.title).appendTo("#left");

                    $("<img/>").attr("src", ritem.media.m).appendTo("#right");
                    $("<br/>").appendTo("#right");
                    $("<a/>").attr("href", ritem.link).html(ritem.author + ": " + ritem.title).appendTo("#right");


                    $("<img/>").attr("src", litem.media.m.replace("_m.jpg", "_b.jpg")).appendTo("#blend");
                    $("<img/>").attr("id", "top").attr("src",
                        ritem.media.m.replace("_m.jpg", "_b.jpg")).attr("style", "position: absolute; left: 0px; top: 0px;").appendTo("#blend");
                    $("#slider").slider("value", 20+Math.floor(Math.random()*60));
                });
        });

        $(function() {
            $("#slider").slider({
                slide: function(ev, ui) { update(ui.value); },
                change: function(ev, ui) { update(ui.value); },
            });
        });
    </script>
</body>
</html>
